{"version":3,"sources":["data/imagesdata.ts","onImagesDidLoad/onImagesDidLoad.js","App.tsx","index.tsx"],"names":["natureImagesGallery","src","alt","carsImagesGallery","OnImagesLoaded","preparePromiesArray","bind","resolveAllPromies","imagesLoadPromisesArray","envelopRef","React","createRef","state","loadingImages","this","prevProps","prevState","props","doesImagesUpdated","setState","imgs","current","getElementsByTagName","Array","from","map","img","index","push","Promise","resolve","complete","onload","console","log","onerror","self","all","then","_","length","onLoaded","catch","e","classNameWhileSpinning","spinnerColor","spinnerSize","ref","className","size","color","loading","children","Component","defaultProps","App","imagesGallery","imagesArray","activeTab","handleTabChange","newValue","getImagesArrayAndPreventBrowserCache","hangleImagesLoadFinish","Math","floor","random","Fragment","AppBar","position","Toolbar","Typography","variant","Tabs","value","onChange","aria-label","Tab","label","key","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"oVAAaA,G,MAAsB,CAC/B,CACIC,IAAK,yIACHC,IAAK,QAEX,CACID,IAAK,wIACHC,IAAK,QAEX,CACID,IAAK,wIACHC,IAAK,QAEX,CACID,IAAK,yIACHC,IAAK,QAEX,CACID,IAAK,wIACHC,IAAK,QAEX,CACID,IAAK,wIACHC,IAAK,UAMFC,EAAoB,CAC7B,CACIF,IAAK,wIACHC,IAAK,QAEX,CACID,IAAK,qIACHC,IAAK,QAEX,CACID,IAAK,8GACHC,IAAK,QAEX,CACID,IAAK,2EACHC,IAAK,QAEX,CACID,IAAK,wIACHC,IAAK,QAEX,CACID,IAAK,yGACHC,IAAK,S,iEC1CME,G,kNAGjBC,oBAAsB,EAAKA,oBAAoBC,KAAzB,gB,EACtBC,kBAAoB,EAAKA,kBAAkBD,KAAvB,gB,EAGpBE,wBAA0B,G,EAC1BC,WAAaC,IAAMC,Y,EAGnBC,MAAQ,CACJC,eAAe,G,kEAIfC,KAAKT,sBACLS,KAAKP,sB,yCAGUQ,EAAWC,GAAY,IAAD,QAChCF,KAAKF,MAAMC,eAAiBC,KAAKG,MAAMC,mBACxCJ,KAAKK,SAAS,CACVN,eAAe,IAChB,WACC,EAAKR,sBACL,EAAKE,yB,4CAMM,IAAD,OAClBO,KAAKM,KAAON,KAAKL,WAAWY,QAAQC,qBAAqB,OACzDC,MAAMC,KAAKV,KAAKM,MAAMK,KAAI,SAACC,EAAKC,GAC5B,EAAKnB,wBAAwBoB,KACzB,IAAIC,SAAQ,SAAAC,GACJJ,EAAIK,UACJD,GAAQ,GAEZJ,EAAIM,OAAS,WACTC,QAAQC,IAAI,UACZJ,GAAQ,IAEZJ,EAAIS,QAAU,WACVL,GAAQ,a,0CASxB,IAAIM,EAAOtB,KACXe,QAAQQ,IAAIvB,KAAKN,yBACZ8B,MAAK,SAAAC,GACFH,EAAKjB,SAAS,CACVN,eAAe,IAChB,WACCuB,EAAK5B,wBAAwBgC,OAAS,EACtCJ,EAAKnB,MAAMwB,iBAGlBC,OAAM,SAAAC,S,+BAKL,IAAD,EACyD7B,KAAKG,MAA3D2B,EADH,EACGA,uBAAwBC,EAD3B,EAC2BA,aAAcC,EADzC,EACyCA,YAE9C,OAAIhC,KAAKF,MAAMC,cAEP,yBAAKkC,IAAKjC,KAAKL,WACXuC,UAAS,4BAAuBJ,IAG5B,yBAAKI,UAAU,iBACX,kBAAC,IAAD,CACIC,KAAMH,EACNI,MAAOL,EACPM,QAASrC,KAAKF,MAAMC,iBAK5BC,KAAKG,MAAMmC,UAMnB,yBAAKL,IAAKjC,KAAKL,WAAYuC,UAAS,wBAE5BlC,KAAKG,MAAMmC,c,GA/FSC,cAgH5CjD,EAAekD,aAAe,CAC1BV,uBAAwB,kBACxBC,aAAc,UACdC,YAAa,K,ICrGIS,E,4MAEnB3C,MAAQ,CACN4C,cAAeC,EACfC,UAAW,EACX7C,eAAe,G,EAYjB8C,gBAAkB,SAAChB,EAAQiB,GACzB,EAAKzC,SAAS,CACZqC,cAA6B,IAAbI,EACd,EAAKC,qCAAqCJ,GACxC,EAAKI,qCAAqCJ,GAC9CC,UAAWE,EACX/C,eAAe,K,EAInBiD,uBAAyB,WAEvB,EAAK3C,SAAS,CACZN,eAAe,K,mFAtBkB4C,GACnC,OAAOA,EAAYhC,KAAI,SAAAC,GACrB,MAAO,CACLzB,IAAKyB,EAAIzB,IAAM,MAAQ8D,KAAKC,MAAsB,IAAhBD,KAAKE,UACvC/D,IAAKwB,EAAIxB,U,+BAwBb,OACE,kBAAC,IAAMgE,SAAP,KACE,kBAACC,EAAA,EAAD,CAAQC,SAAS,UACf,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAYC,QAAQ,MAApB,iBAIF,kBAACC,EAAA,EAAD,CAAMC,MAAO3D,KAAKF,MAAM8C,UAAWgB,SAAU5D,KAAK6C,gBAAiBgB,aAAW,uBAC5E,kBAACC,EAAA,EAAD,CAAKC,MAAM,mBACX,kBAACD,EAAA,EAAD,CAAKC,MAAM,mBAIf,0BAAM7B,UAAU,YAEd,kBAAC,EAAD,CACEP,SAAU3B,KAAKgD,uBACf5C,mBAAgD,IAA7BJ,KAAKF,MAAMC,eAE9B,yBAAKmC,UAAU,WAEXlC,KAAKF,MAAM4C,cAAc/B,KAAI,SAACC,EAAKC,GAAN,OAC3B,yBAAKmD,IAAKnD,EAAOqB,UAAU,gBACzB,yBAAK/C,IAAKyB,EAAIzB,IAAKC,IAAKwB,EAAIxB,IAAK8C,UAAU,6B,GA5D9BtC,IAAM2C,WClBvC0B,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.20069a7b.chunk.js","sourcesContent":["export const natureImagesGallery = [\r\n    {\r\n        src: \"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1502&q=80\"\r\n        , alt: 'pic1'\r\n    },\r\n    {\r\n        src: \"https://images.unsplash.com/photo-1505765050516-f72dcac9c60e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=750&q=80\"\r\n        , alt: 'pic2'\r\n    },\r\n    {\r\n        src: \"https://images.unsplash.com/photo-1501854140801-50d01698950b?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=840&q=80\"\r\n        , alt: 'pic3'\r\n    },\r\n    {\r\n        src: \"https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1440&q=80\"\r\n        , alt: 'pic4'\r\n    },\r\n    {\r\n        src: \"https://images.unsplash.com/photo-1500534623283-312aade485b7?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=750&q=80\"\r\n        , alt: 'pic5'\r\n    },\r\n    {\r\n        src: \"https://images.unsplash.com/photo-1505245208761-ba872912fac0?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=750&q=80\"\r\n        , alt: 'pic6'\r\n    },\r\n\r\n\r\n]\r\n\r\nexport const carsImagesGallery = [\r\n    {\r\n        src: \"https://images.unsplash.com/photo-1494976388531-d1058494cdd8?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=750&q=80\"\r\n        , alt: 'car1'\r\n    },\r\n    {\r\n        src: \"https://images.unsplash.com/photo-1553440569-bcc63803a83d?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=711&q=80\"\r\n        , alt: 'car2'\r\n    },\r\n    {\r\n        src: \"https://image.cnbcfm.com/api/v1/image/106109083-156752053507004_chiron_dynamic_front_print.jpg?v=1567520630\"\r\n        , alt: 'car3'\r\n    },\r\n    {\r\n        src: \"https://e.glbimg.com/og/ed/f/original/2015/05/08/dodge-viper-acr-3_1.jpg\"\r\n        , alt: 'car4'\r\n    },\r\n    {\r\n        src: \"https://images.unsplash.com/photo-1568605117036-5fe5e7bab0b7?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=750&q=80\"\r\n        , alt: 'car5'\r\n    },\r\n    {\r\n        src: \"https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/07-ss300p-ehra-lessien-web-1567417975.jpg\"\r\n        , alt: 'car6'\r\n    },\r\n\r\n\r\n]","\r\n\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Spinner\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\n\r\nimport './onImagesLoad.scss';\r\n\r\nexport default class OnImagesLoaded extends Component {\r\n\r\n    // Bind functions\r\n    preparePromiesArray = this.preparePromiesArray.bind(this);\r\n    resolveAllPromies = this.resolveAllPromies.bind(this);\r\n\r\n    // Variables\r\n    imagesLoadPromisesArray = [];\r\n    envelopRef = React.createRef();\r\n\r\n    //state\r\n    state = {\r\n        loadingImages: true\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.preparePromiesArray();\r\n        this.resolveAllPromies();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (!this.state.loadingImages && this.props.doesImagesUpdated) {\r\n            this.setState({\r\n                loadingImages: true\r\n            }, () => {\r\n                this.preparePromiesArray();\r\n                this.resolveAllPromies();\r\n            })\r\n\r\n        }\r\n    }\r\n\r\n    preparePromiesArray() {\r\n        this.imgs = this.envelopRef.current.getElementsByTagName('img');\r\n        Array.from(this.imgs).map((img, index) => {\r\n            this.imagesLoadPromisesArray.push(\r\n                new Promise(resolve => {\r\n                    if (img.complete)\r\n                        resolve(true)\r\n\r\n                    img.onload = () => {\r\n                        console.log(\"loaded\")\r\n                        resolve(true);\r\n                    };\r\n                    img.onerror = () => {\r\n                        resolve(false)\r\n                    }\r\n                })\r\n            )\r\n        });\r\n\r\n    }\r\n\r\n    resolveAllPromies() {\r\n        let self = this;\r\n        Promise.all(this.imagesLoadPromisesArray)\r\n            .then(_ => {\r\n                self.setState({\r\n                    loadingImages: false\r\n                }, () => {\r\n                    self.imagesLoadPromisesArray.length = 0;\r\n                    self.props.onLoaded();\r\n                })\r\n            })\r\n            .catch(e => {\r\n            })\r\n\r\n    }\r\n\r\n    render() {\r\n        const { classNameWhileSpinning, spinnerColor, spinnerSize } = this.props;\r\n\r\n        if (this.state.loadingImages) {\r\n            return (\r\n                <div ref={this.envelopRef}\r\n                    className={`spinningContainer ${classNameWhileSpinning}`} >\r\n                    {/* Spinner */}\r\n                    {\r\n                        <div className=\"sweet-loading\">\r\n                            <ClipLoader\r\n                                size={spinnerSize}\r\n                                color={spinnerColor}\r\n                                loading={this.state.loadingImages}\r\n                            />\r\n                        </div>\r\n                    }\r\n                    {\r\n                        this.props.children\r\n                    }\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div ref={this.envelopRef} className={`imagesDidLoadEnvelop`} >\r\n                    {\r\n                        this.props.children\r\n                    }\r\n                </div>\r\n            );\r\n        }\r\n\r\n    }\r\n}\r\n\r\nOnImagesLoaded.propTypes = {\r\n    onLoaded: PropTypes.func.isRequired,\r\n    doesImagesUpdated: PropTypes.bool.isRequired,\r\n    classNameWhileSpinning: PropTypes.string,\r\n    spinnerColor: PropTypes.string,\r\n    spinnerSize: PropTypes.number\r\n}\r\n\r\nOnImagesLoaded.defaultProps = {\r\n    classNameWhileSpinning: \"centerVerically\",\r\n    spinnerColor: \"#123abc\",\r\n    spinnerSize: 150\r\n};","import React from 'react';\nimport './App.scss';\nimport * as imagesArray from './data/imagesdata';\nimport { IImage } from './data/IImage';\n\n// MUI\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\n// OnImagesLoaded \nimport OnImagesLoaded from './onImagesDidLoad/onImagesDidLoad';\n\ntype State = {\n  imagesGallery: IImage[];\n  activeTab: number;\n  loadingImages: boolean;\n}\n\ntype Props = {}\n\n\nexport default class App extends React.Component<Props, State> {\n\n  state = {\n    imagesGallery: imagesArray.natureImagesGallery,\n    activeTab: 0,\n    loadingImages: true\n  }\n\n  getImagesArrayAndPreventBrowserCache(imagesArray: IImage[]) {\n    return imagesArray.map(img => {\n      return {\n        src: img.src + \"?v=\" + Math.floor(Math.random() * 100),\n        alt: img.alt\n      }\n    });\n  }\n\n  handleTabChange = (e: any, newValue: number) => {\n    this.setState({\n      imagesGallery: (newValue === 0) ?\n        this.getImagesArrayAndPreventBrowserCache(imagesArray.natureImagesGallery)\n        : this.getImagesArrayAndPreventBrowserCache(imagesArray.carsImagesGallery),\n      activeTab: newValue,\n      loadingImages: true\n    })\n  }\n\n  hangleImagesLoadFinish = () => {\n    debugger\n    this.setState({\n      loadingImages: false\n    })\n  }\n\n\n  render() {\n    return (\n      <React.Fragment>\n        <AppBar position=\"static\">\n          <Toolbar>\n            <Typography variant=\"h6\">\n              Nice gallery\n          </Typography>\n          </Toolbar>\n          <Tabs value={this.state.activeTab} onChange={this.handleTabChange} aria-label=\"simple tabs example\">\n            <Tab label=\"Nature gallery\" />\n            <Tab label=\"Cars gallery\" />\n          </Tabs>\n        </AppBar>\n\n        <main className=\"mainZone\">\n\n          <OnImagesLoaded\n            onLoaded={this.hangleImagesLoadFinish}\n            doesImagesUpdated={this.state.loadingImages === true}>\n\n            <div className=\"gallery\">\n              {\n                this.state.imagesGallery.map((img, index) => (\n                  <div key={index} className=\"gallery__img\">\n                    <img src={img.src} alt={img.alt} className=\"gallery__img\"></img>\n                  </div>\n                ))\n              }\n            </div>\n\n          </OnImagesLoaded>\n\n        </main>\n\n      </React.Fragment>\n\n    )\n  }\n\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}